<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title></title>
  <script src='https://api.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v0.38.0/mapbox-gl.css' rel='stylesheet' />
  <link rel="stylesheet" type="text/css" href="http://cdn.jsdelivr.net/jquery.slick/1.6.0/slick.css"/>
  <link rel="stylesheet" type="text/css" href="http://cdn.jsdelivr.net/jquery.slick/1.6.0/slick-theme.css"/>
  <script type="text/javascript" src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
  <script type="text/javascript" src="http://code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
  <script type="text/javascript" src="http://cdn.jsdelivr.net/jquery.slick/1.6.0/slick.min.js"></script>
  <style>
      body {
        margin: 0;
        padding: 0;
      }

      #map {
        position: absolute;
        top: 0;
        bottom: 0;
        width: 100%;
      }

      .pic_sls {
        width:200px;
        margin-left: 25px;
        margin-right: 25px;
        content: ""
      }
      .slick-prev:before, .slick-next:before {
        color: rgba(0,0,0,0.5);
      }
    </style>
</head>
<body>
  <div id='map' ></div>
  <script>



    var pics = [
      [
        "https://4.bp.blogspot.com/-ixYUe3cp19o/WWJY15kaFlI/AAAAAAAAABQ/uutgKrSjY7kvdUXKMMOCVbUWok4dvQd3QCLcBGAs/s1600/DSC_9275.JPG", 
        "https://3.bp.blogspot.com/-i15dBjBd1Rs/WWJY2VJeh2I/AAAAAAAAABU/jfrxzfXhrh0JFoI0Kp7RrEtXONfoSwElACLcBGAs/s1600/DSC_9255.JPG", 
        "https://3.bp.blogspot.com/-3idlCinxZEc/WWI8gTCaNaI/AAAAAAAAAAo/NXwrmVjAhuctNQstVUmFMNIVfLPrkez0gCLcBGAs/s1600/DSC_9240.JPG"
      ], //id=0
      [
        "https://1.bp.blogspot.com/-0O817KPEDzs/WWJZCXBAOqI/AAAAAAAAABg/qdUbpCic5E0fP0MYffXolzxNs9c9KRXDQCLcBGAs/s1600/IMG_9500.JPG", 
        "https://4.bp.blogspot.com/-R9KQqYv-H3A/WWJZCJ89TiI/AAAAAAAAABc/Pb_JBpo4Re8qYXR7hSTjsUDTrNdDkwW4gCLcBGAs/s1600/IMG_9497.JPG",
"https://3.bp.blogspot.com/-yJfEVVyP7as/WWJZA7oTnzI/AAAAAAAAABY/d1xkr2FpVx4b3mrvepUqA14J40NNWGuNwCLcBGAs/s1600/IMG_9502.JPG"
      ]  //id=1
    ];



    mapboxgl.accessToken = 'pk.eyJ1Ijoic2hldmNoZW5rbzQ1IiwiYSI6ImNqMWZnb3NnNjAwMHIyd3J4c29wOHgybzEifQ.J9NgVo7RF1BBhdYIkVKKwQ';
    var map = new mapboxgl.Map({
        container: 'map',
        style: 'mapbox://styles/shevchenko45/cj8lwywy96cs72sn45pim7gi9',
        // style: 'mapbox://styles/shevchenko45/cj4wo92s23fio2rnukei3ilc8',
        center: [35.051303, 48.459590],
        minZoom: 16,
  maxZoom: 19,
    });
    map.on('click', function(e) {
      var features = map.queryRenderedFeatures(e.point, {
        layers: ['point'] // replace this with the name of the layer
      });

      if (!features.length) {
        return;
      }

      var feature = features[0];
      var piclist = pics[feature.properties.id];
      var picsHTML = `<div class="pic_sls">${piclist.map(x=>"<img width=200 src='"+x+"' />").join("")}</div>`;
      var popup = new mapboxgl.Popup({ offset: [0, -15] })
        .setLngLat(feature.geometry.coordinates)
        .setHTML(`<h3>Name: ${feature.properties.name}</h3>`+
                 `<p>${feature.properties.description}</p>` +
                 `<a href=${feature.properties.reference}>More</a>` +
                 picsHTML)
        .addTo(map);

      $('.pic_sls').slick({
        slidesToShow: 1,
        infinite: true,
        dots: true
      });
    });
  </script>
</body>
</html>